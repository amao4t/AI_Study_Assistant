{% extends 'base.html' %}

{% block title %}OCR & Image Processing | AI Study Assistant{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/ocr.css') }}">
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h1>Image Processing & OCR</h1>
            <p class="lead">Extract text from images or image-based PDFs using OCR (Optical Character Recognition) powered by Claude Vision AI</p>
            
            <div class="alert alert-info">
                <i class="bi bi-lightbulb"></i>
                <strong>Improved OCR capability:</strong> This application now uses Claude Vision AI for accurate text extraction from images with fallback to local processing if needed.
            </div>
            
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Process Image with OCR</h5>
                </div>
                <div class="card-body">
                    <form id="image-ocr-form">
                        <div class="mb-3">
                            <label for="image-file" class="form-label">Select Image</label>
                            <input class="form-control" type="file" id="image-file" name="image" accept="image/*">
                            <div class="form-text">Supported formats: JPG, PNG, GIF, BMP</div>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="analyze-image" name="analyze">
                            <label class="form-check-label" for="analyze-image">Also analyze image content (extract more context)</label>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="save-image" name="save">
                            <label class="form-check-label" for="save-image">Save image as document</label>
                        </div>
                        <button type="submit" class="btn btn-primary">Extract Text</button>
                    </form>
                </div>
            </div>
            
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Process PDF with OCR</h5>
                </div>
                <div class="card-body">
                    <form id="pdf-ocr-form">
                        <div class="mb-3">
                            <label for="pdf-file" class="form-label">Select PDF</label>
                            <input class="form-control" type="file" id="pdf-file" name="pdf" accept=".pdf">
                            <div class="form-text">PDF files with image content will be processed with OCR</div>
                        </div>
                        <button type="submit" class="btn btn-primary">Process with OCR</button>
                    </form>
                </div>
            </div>
            
            <div id="ocr-result" class="mt-3" style="display: none;">
                <h3>Extracted Text</h3>
                <div id="ocr-text" class="ocr-text-container"></div>
                <div class="mt-3">
                    <button id="use-ocr-text" class="btn btn-sm btn-primary">Use This Text</button>
                    <button id="save-ocr-text" class="btn btn-sm btn-outline">Save as Document</button>
                </div>
            </div>
            
            <div id="ai-analysis" class="mt-3" style="display: none;">
                <h3>AI Analysis</h3>
                <div id="analysis-text" class="analysis-text-container"></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/ocr.js') }}"></script>
{% endblock %} 